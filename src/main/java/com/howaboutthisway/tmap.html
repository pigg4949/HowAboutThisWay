<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Tmap 지도</title>
  <script src="https://apis.openapi.sk.com/tmap/jsv2?version=1&appKey=5IMNtNF9C99SCbZR9bOLO3j6DMWNJgrW6qr30hL1"></script>
  <style>
    html, body, #map_div { width: 100%; height: 100%; margin: 0; padding: 0; }
  </style>
</head>
<body>
<div id="map_div"></div>
<script>
  const map = new Tmapv2.Map("map_div", {
    center: new Tmapv2.LatLng(37.5665, 126.9780),
    width: "100%",
    height: "100%",
    zoom: 15
  });

  map.addListener("click", function(evt) {
    const lat = evt.latLng._lat;
    const lon = evt.latLng._lng;

    console.log("좌표 클릭됨:", lat, lon);

    // Java 서버에 클릭된 좌표 전송
    fetch("http://localhost:8080/api/location", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify({ lat: lat, lon: lon })
    }).then(res => res.text())
            .then(data => alert("서버 응답: " + data));
  });
</script>
</body>
</html>
